function dmsfToggle(s,d,a,e){let t=$(s).parents("tr").first(),l=$(t).hasClass("dmsf-collapsed");if(t.hasClass("dmsf-child"))return;t.hasClass("dmsf-not-loaded")&&dmsfExpandRows(d,a,t,e),l?$(t).switchClass("dmsf-collapsed","dmsf-expanded"):$(t).switchClass("dmsf-expanded","dmsf-collapsed");let n=0;$("tr.dmsf-tree").each(function(s,e){$(e).hasClass(a?a+"f":d+"p")&&(l?(m=$(e).attr("class").match(/(\d+(p|f)) idnt/),m&&$("#"+m[1]+"span").hasClass("dmsf-expanded")&&$(e).removeClass("dmsf-hidden")):$(e).hasClass("dmsf-hidden")||$(e).addClass("dmsf-hidden")),$(e).removeClass("even"),$(e).removeClass("odd"),0===n?$(e).addClass("odd"):$(e).addClass("even"),n^=1})}function dmsfExpandRows(project_id,folder_id,parentRow,url){$(parentRow).removeClass("dmsf-not-loaded");let idnt=0,classes="",m=$(parentRow).attr("class").match(/idnt-(\d+)/);m&&(idnt=m[1]),m=$(parentRow).attr("class").match(/((\d|p|f|\s)+) idnt/),m&&(classes=m[1]),m=$(parentRow).attr("id").match(/^(\d+(p|f))/),m&&(classes=classes+" "+m[1]),$.ajax({url:url,type:"post",dataType:"html",data:{project_id:project_id,folder_id:folder_id,row_id:$(parentRow).attr("id"),idnt:idnt,classes:classes}}).done(function(data){m&&data.indexOf(" "+m[1]+" ")<0?($(parentRow).removeClass("dmsf-expanded"),$(parentRow).hasClass("dmsf-child")||$(parentRow).addClass("dmsf-child")):eval(data)}).fail(function(){console.log("An error in rows expanding")})}function noteMandatory(s){let d=$("textarea#note");d.prop("required",s),s&&d.focus()}