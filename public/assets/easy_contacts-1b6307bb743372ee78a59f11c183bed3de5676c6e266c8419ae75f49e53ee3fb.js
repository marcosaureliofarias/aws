EASY.schedule.require(function(t){"use strict";let a={};const e=["issue","easy_contact","easy_crm_case","easy_calculation_project_client","project"];EASY.contacts=EASY.contacts||{},EASY.contacts.registerAssignableEntity=function(t,e){a[t]=e},EASY.contacts.getEntityDataFromDropperTarget=function(a){return t('div.easy-dropper-target[data-drop-action="'+a+'"]').data()},EASY.contacts.isRegisteredAndCurrent=function(t){return a[t]&&EASY.contacts.getEntityDataFromDropperTarget(t)},EASY.contacts.getCurrentEntity=function(){let t=null;for(const[n,c]of e.entries())if(EASY.contacts.isRegisteredAndCurrent(c)){t=a[c];break}return t},EASY.contacts.initEasyContactsAssignable=function(){const a=EASY.contacts.easyContactToolbarLocalize();let e=EASY.contacts.getCurrentEntity();if(!e)return;const n=EASY.contacts.getEntityDataFromDropperTarget(e.dropAction),c=c=>{if(e.url){let a,s=t(c.target).closest("li").data(),o=e.getAttributes(n,s);a={url:e.url,data:o,type:"POST",complete:a=>{try{t.each(t.parseJSON(a.responseText),(a,e)=>{if(e){let n=t("<div/>").attr({"class":"flash "+a}).html(t("<span/>").text(e));n.append(t("<a/>").attr({"class":"icon-close",href:"javascript:$(this).closest('.flash').fadeOut(500, function(){$(this).remove()})"})),t("#content .flash")[0]?t("#content .flash").replaceWith(n):t("#content").prepend(n)}})}catch(e){console.error("contacts toolbar:",e.message)}}},e.ajaxParams&&t.extend(a,e.ajaxParams),t.ajax(a)}else e.callback&&"function"==typeof e.callback?e.callback(n,contactData):alert(a.wrongParams)};t("#easy_contacts_toolbar_list li.assignable-list-item").each((a,n)=>{t(n).data();let s=t('<div class="push-right"><div/>'),o=t("<a></a>",{"class":(e.cssIcon||"icon-relation")+" assign-contact-link",title:e.assignToTitle});s.append(o),t(n).append(s),t(o).click(c)})},t.fn.easy_contacts_toolbar=function(a){var e={moreToDoLists:!1},n=t.extend(!0,{},e,a),c={afterOpen:function(){s.find("input").focus()}};c=t.extend(!0,{},c,n);var s=t(this).easySlidingPanel(c);s.find(".expander-panel > .expander-panel-content")}},"jQuery");