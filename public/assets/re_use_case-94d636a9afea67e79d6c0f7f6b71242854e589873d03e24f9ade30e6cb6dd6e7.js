function jsInitScript(){jQuery("#steps").sortable({placeholder:"ui-state-highlight",containment:"#steps",start:function(){jQuery(".ui-state-highlight").html("<div style='background:#4466AA; width: 800px; height: 5px; clear: both;'></div>")},update:function(){updateStepPositionFields()}})}function addExpansion(e,t){jQuery(e).parent().parent().prev().children().next().children().children().next().append(t)}function add_fields(e,t,n){var i=new Date,s=Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds());Math.round((new Date).getTime()/1e3);switch(t){case"re_use_case_step_expansion":case"re_use_case_step_expansions":addExpansion(e,n=replaceAll(n,"new_re_use_case_step_expansions",s.toString().substring(5,12)))}}function replaceAll(e,t,n){return e.replace(new RegExp(t,"g"),n)}function updateStepPositionFields(){var e=1;jQuery("#steps").children().each(function(){jQuery(this).attr("id","use_case_step_expansion_drag_"+e),jQuery(this).children().children(".position").attr("value",e),e++})}function remove_fields(e){jQuery(e).prev("input[type=hidden]").val("1"),jQuery(e).closest(".nested_field").hide()}jQuery(document).ready(function(){jsInitScript(),updateStepPositionFields()});