<%
  trackers_for_select = Tracker.sorted.map { |t| [t.name, t.id.to_s] }
  available_global_filters = @easy_page_modules_data[block_name][:available_global_filters]
%>

<div class="tabular">
  <%= back_url_hidden_field_tag %>
  <p>
    <%= label_tag "#{block_name}[name]", l(:field_name) %>
    <%= text_field_tag "#{block_name}[name]", settings['name'] ? settings['name'] : l('easy_pages.modules.trackers_allocations') %>
  </p>
  <p>
    <%= label_tag "#{block_name}[tracker_ids][]", l(:label_tracker_plural) %>
    <%= autocomplete_field_tag "#{block_name}[tracker_ids][]", trackers_for_select, settings['tracker_ids'] %>
  </p>
</div>
<fieldset>
  <div>
    <%= render 'easy_page_modules/global_filters',
               modul_uniq_id: block_name,
               block_name: block_name,
               page_params: page_params,
               query_params: settings,
               available_global_filters: available_global_filters,
               page_module: page_module %>
  </div>
</fieldset>
